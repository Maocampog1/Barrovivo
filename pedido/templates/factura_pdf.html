{# pedido/templates/pedido/factura_pdf.html #}
{% load humanize static %}
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Factura {{ compra.numero }}</title>
<style>
  @page { size: A4; margin: 22mm 18mm 26mm 18mm; }
  body { font-family: 'Montserrat', Arial, sans-serif; font-size: 11px; color:#222; }
  .encabezado { display:flex; align-items:center; justify-content:space-between; }
  .logo { height:48px; }
  .titulo { text-align:center; flex:1; }
  .banda { background:#EF6E3A; color:#fff; padding:4px 10px; border-radius:4px; font-weight:600; }
  .gris { color:#666; }
  .cols { display:flex; gap:24px; margin-top:18px; }
  .col { flex:1; }
  .bloque { padding:10px 12px; border:1px solid #eee; border-radius:6px; }
  h4 { margin:0 0 6px 0; font-size:12px; }
  table { width:100%; border-collapse:collapse; margin-top:16px; }
  th, td { padding:8px 6px; border-bottom:1px solid #eee; }
  th { text-align:left; font-weight:600; font-size:11px; color:#444; background:#fafafa; }
  tfoot td { border-top:1px solid #ddd; font-weight:700; }
  .right { text-align:right; }
  .mt-6 { margin-top:24px; }
  .pie { position:fixed; left:0; right:0; bottom:-18mm; height:22mm; background:#EF6E3A; color:#fff; text-align:center;
         display:flex; align-items:center; justify-content:center; font-size:10px; }
</style>
</head>
<body>

  <div class="encabezado">
    <img src="{{ STATIC_URL }}multimedia/logo.png" class="logo">
    <div class="titulo">
      <div style="font-weight:700; font-size:14px;">Factura de Venta</div>
      <div class="gris">BARROVIVO</div>
    </div>
    <div>
      <div class="banda">{{ compra.numero }}</div>
      <div class="gris" style="text-align:right; margin-top:6px;">{{ compra.creado }}</div>
    </div>
  </div>

  <div class="cols">
    <div class="col">
      <div class="bloque">
        <h4>Información de facturación</h4>
        <div>Cliente: {{ compra.facturacion.nombres }} {{ compra.facturacion.apellidos }}</div>
        <div>Cédula: {{ compra.facturacion.cedula }}</div>
        <div>Celular: {{ compra.facturacion.telefono }}</div>
        <div>Correo: {{ compra.facturacion.correo }}</div>
      </div>
    </div>
    <div class="col">
      <div class="bloque">
        <h4>Detalles de envío</h4>
        <div>País/Departamento/Municipio: Colombia/{{ compra.envio.departamento }}/{{ compra.envio.municipio }}</div>
        <div>Dirección: {{ compra.envio.direccion }} {{ compra.envio.apto_info }}</div>
        <div>Detalles: {% if compra.envio.apto_info %}{{ compra.envio.apto_info }}{% else %}N/A{% endif %}</div>
      </div>
    </div>
  </div>

  <table class="mt-6">
    <thead>
      <tr>
        <th>Producto</th>
        <th class="right">Cantidad</th>
        <th class="right">Valor Neto</th>
        <th class="right">Total</th>
      </tr>
    </thead>
    <tbody>
      {% for it in compra.lineas %}
      <tr>
        <td>{{ it.nombre }}</td>
        <td class="right">{{ it.cantidad }}</td>
        <td class="right">${{ it.precio_unitario|intcomma }}</td>
        <td class="right">${{ it.subtotal|intcomma }}</td>
      </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <td colspan="3" class="right">TOTAL:</td>
        <td class="right">${{ compra.total|intcomma }}</td>
      </tr>
    </tfoot>
  </table>

  <div class="pie">
    {{ compra.numero }} &nbsp; | &nbsp; BARROVIVO
  </div>
</body>
</html>
